{"version":3,"sources":["walls.js"],"names":["cc","Class","extends","Component","properties","wall_Prefab","default","type","Prefab","onLoad","node","scaleY","walls","getComponent","TiledObjectGroup","getObjects","i","length","wall","instantiate","addChild","anchorX","anchorY","width","height","setPosition","offset","x","y","boxCollider","PhysicsBoxCollider","size","apply","start","update","dt"],"mappings":";;;;;;AAEA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ;AAFA;AAFL,KAHP;;AAWLC,UAXK,oBAWK;AACN;AACA,aAAKC,IAAL,CAAUC,MAAV,GAAmB,CAAC,CAApB,CAFM,CAEgB;;AAEtB,YAAIC,QAAM,KAAKF,IAAL,CAAUG,YAAV,CAAuBb,GAAGc,gBAA1B,EAA4CC,UAA5C,EAAV,CAJM,CAI6D;AACnE;;AAEA;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,MAAMK,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC;AACA;AACA,gBAAIE,OAAOlB,GAAGmB,WAAH,CAAe,KAAKd,WAApB,CAAX;AACA;AACA,iBAAKK,IAAL,CAAUU,QAAV,CAAmBF,IAAnB;AACAA,iBAAKG,OAAL,GAAe,CAAf;AACAH,iBAAKI,OAAL,GAAe,CAAf;AACAJ,iBAAKK,KAAL,GAAWX,MAAMI,CAAN,EAASO,KAApB;AACAL,iBAAKM,MAAL,GAAYZ,MAAMI,CAAN,EAASQ,MAArB;AACAN,iBAAKO,WAAL,CAAiBb,MAAMI,CAAN,EAASU,MAAT,CAAgBC,CAAhB,GAAkB,IAAnC,EAAwCf,MAAMI,CAAN,EAASU,MAAT,CAAgBE,CAAhB,GAAkB,IAA1D;AACA,gBAAIC,cAAcX,KAAKL,YAAL,CAAkBb,GAAG8B,kBAArB,CAAlB;AACA;AACAD,wBAAYH,MAAZ,CAAmBC,CAAnB,GAAuBT,KAAKK,KAAL,GAAY,GAAnC;AACAM,wBAAYH,MAAZ,CAAmBE,CAAnB,GAAuBV,KAAKM,MAAL,GAAa,CAAC,GAArC;AACA;AACAK,wBAAYE,IAAZ,CAAiBR,KAAjB,GAAyBL,KAAKK,KAA9B;AACAM,wBAAYE,IAAZ,CAAiBP,MAAjB,GAA0BN,KAAKM,MAA/B;AACA;AACAK,wBAAYG,KAAZ;AAIH;AACJ,KA3CI;AA6CLC,SA7CK,mBA6CI,CAAE,CA7CN;AA+CLC,UA/CK,kBA+CGC,EA/CH,EA+CO,CAAE;AA/CT,CAAT","file":"walls.js","sourceRoot":"../../../../../assets/scripts/tiledmap","sourcesContent":["\n\n// *-*-*-*-*-*-*-* tiledmap walls对象层节点 *-*-*-*-*-*-*-*-*\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 墙类(预制体)\n        wall_Prefab: {\n            default: null,\n            type: cc.Prefab\n        },\n    },\n\n    onLoad () {\n        // console.log(this.node.position);// (0,0)\n        this.node.scaleY = -1;// *-!-*-!-*- 对象层在tiledmap中的位置是延Y轴对折 -*-!-*-!-*\n\n        var walls=this.node.getComponent(cc.TiledObjectGroup).getObjects();// 获取对象层的对象数组\n        // console.log(walls);\n\n        // 遍历墙对象层的每个墙对象\n        for (let i = 0; i < walls.length; i++) {\n            // console.log(walls[i]);\n            // 创建墙\n            var wall = cc.instantiate(this.wall_Prefab);\n            // 将新增的节点添加到 Canvas 节点下面\n            this.node.addChild(wall);\n            wall.anchorX = 0;\n            wall.anchorY = 0;\n            wall.width=walls[i].width;\n            wall.height=walls[i].height;\n            wall.setPosition(walls[i].offset.x-1920,walls[i].offset.y-1072);\n            var boxCollider = wall.getComponent(cc.PhysicsBoxCollider);\n            //设置偏移量\n            boxCollider.offset.x = wall.width *0.5;\n            boxCollider.offset.y = wall.height *-0.5;\n            //设置包围盒范围\n            boxCollider.size.width = wall.width;\n            boxCollider.size.height = wall.height;\n            //重新init一下物理collider\n            boxCollider.apply(); \n            \n           \n            \n        }\n    },\n\n    start () {},\n\n    update (dt) {},\n});\n"]}